(this["webpackJsonpfrequency-counter"]=this["webpackJsonpfrequency-counter"]||[]).push([[0],{27:function(e,t,c){},28:function(e,t,c){},29:function(e,t,c){},31:function(e,t,c){"use strict";c.r(t);var n=c(5),r=c.n(n),o=c(18),u=c.n(o),a=(c(27),c(3)),s=c(19),i=(c(28),c(8)),d=c(20),l=c(21),j=c(6),b=c(7),f=c(32),m=function(){function e(t){Object(j.a)(this,e),this.records=void 0,this.records=t}return Object(b.a)(e,[{key:"get",get:function(){return this.records}},{key:"debounce",value:function(e){return this.records=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6e4;return e.reduce((function(e,c){var n,r=e[e.length-1];return c.timestamp-(null===r||void 0===r?void 0:r.timestamp)<t?(r.subRecords=(null!==(n=r.subRecords)&&void 0!==n?n:[]).concat(c),e):e.concat(Object(i.a)({},c))}),[])}(this.records,e),this}},{key:"groupByDate",value:function(){return this.records.reduce((function(e,t){var c=Object(f.a)(new Date(t.timestamp),"PP");return e[c]?e[c]=e[c].concat([t]):e[c]=[t],e}),{})}},{key:"compress",value:function(){return this.records=this.records.map((function(e,t){return Object(i.a)(Object(i.a)({},e),{},{id:"".concat(t)})})),this}}]),e}(),v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,c=r.a.useState(e),n=Object(a.a)(c,2),o=n[0],u=n[1],s=r.a.useState([]),j=Object(a.a)(s,2),b=j[0],f=j[1],v=function(){u((function(e){var c=e.concat([{id:Object(l.a)(),timestamp:Date.now(),count:1}]);return null===t||void 0===t||t(new m(c).compress().get),c}))},h=function(e,t){f((function(c){return(0===c.length?o:c).map((function(c){if(c.id===e){t.subRecords;var n=Object(d.a)(t,["subRecords"]);return Object(i.a)(Object(i.a)({},c),n)}return c}))}))},O=function(){f(o),f([])},p=function(){u(b),f([])};return{records:o,addRecord:v,setRecords:u,queue:b,queueUpdate:h,cancelQueue:O,submitQueue:p}},h=function(e){return btoa(JSON.stringify(e))},O=function(e){return JSON.parse(atob(e))},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"foo",t=r.a.useState(e),c=Object(a.a)(t,2),n=c[0],o=c[1],u=function(e){localStorage.setItem("fc-".concat(n,"-64"),h(e))},s=function(e){var t=localStorage.getItem("fc-".concat(n,"-64"));return t?O(t):e},i=function(e,t){return o(e),s(t)},d=localStorage.getItem("fc-lastSave");return d&&o(d),{save:u,load:s,switchNamespace:i}},g=(c(29),c(1)),x=function(e){var t=e.record,c=(e.mode,e.update,new Date(t.timestamp)),n=Object(f.a)(c,"p");return Object(g.jsx)("div",{className:"record-time",children:n})},N=function(e){var t,c=e.record,n=e.mode,r=e.update;return n?Object(g.jsx)("input",{value:null!==(t=c.note)&&void 0!==t?t:"",onChange:function(e){return r(Object(i.a)(Object(i.a)({},c),{},{note:e.target.value}))}}):Object(g.jsx)("div",{className:"record-note",children:c.note})},R=function(e){var t,c=e.record,n=e.mode,r=e.update;return Object(g.jsxs)("div",{className:"record-item-details",children:[Object(g.jsx)(x,{record:c,mode:n,update:r}),Object(g.jsx)("div",{className:"record-count",children:(null!==(t=c.subRecords)&&void 0!==t?t:[]).length+1}),Object(g.jsx)(N,{record:c,mode:n,update:r})]})},S=function(e){var t=e.records,c=e.mode,n=e.updateRecord;return Object(g.jsx)("div",{className:"records",children:Object.keys(t).sort().map((function(e){return Object(g.jsxs)("div",{className:"group",children:[Object(g.jsx)("div",{className:"group-title",children:e}),t[e].map((function(e){return Object(g.jsxs)("div",{className:"record-item",children:[Object(g.jsx)(R,{record:e,mode:c,update:function(t){return n(e.id,t)}}),c&&e.subRecords&&Object(g.jsx)("div",{className:"record-sub-items",children:e.subRecords.map((function(e){return Object(g.jsx)(R,{record:e,mode:c,update:function(t){return n(e.id,t)}},e.id)}))})]},e.id)}))]},e)}))})};var y=function(){var e=r.a.useState(!1),t=Object(a.a)(e,2),c=t[0],n=t[1],o=p(),u=o.save,i=o.load,d=v(i([]),u),l=d.records,j=d.addRecord,b=d.queue,f=d.queueUpdate,h=d.cancelQueue,O=d.submitQueue,x=c&&b.length>0?b:l,N=new m(x).debounce().groupByDate(),R=r.a.useRef(null);return Object(s.useGesture)({onPinch:function(){n(!0)},onWheel:function(e){false}},{target:R}),Object(g.jsxs)("div",{className:"App",children:[!c&&Object(g.jsx)("div",{id:"receiver",onClick:j,ref:R}),Object(g.jsx)("h1",{children:"Frequency"}),Object(g.jsx)("div",{className:"container",children:Object(g.jsx)(S,{records:N,mode:c,updateRecord:f})}),c&&Object(g.jsxs)("div",{className:"mode-tools",children:[Object(g.jsx)("button",{className:"cancel",onClick:function(){h(),n(!1)},children:"Cancel"}),Object(g.jsx)("button",{className:"done",disabled:0===b.length,onClick:function(){O(),n(!1)},children:"Save"})]})]})},k=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,33)).then((function(t){var c=t.getCLS,n=t.getFID,r=t.getFCP,o=t.getLCP,u=t.getTTFB;c(e),n(e),r(e),o(e),u(e)}))};u.a.render(Object(g.jsx)(r.a.StrictMode,{children:Object(g.jsx)(y,{})}),document.getElementById("root")),k()}},[[31,1,2]]]);
//# sourceMappingURL=main.d81d8770.chunk.js.map